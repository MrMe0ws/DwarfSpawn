# DwarfSpawn - Плагин для спавна гномов под землей

Плагин для Minecraft сервера 1.21.10 (Spigot/Paper), который настраивает спавн игроков под землей, чтобы гномы не попадали на солнце.

## Возможности

- ✅ Настройка радиуса спавна (случайный спавн в пределах указанного радиуса)
- ✅ Включение/выключение радиуса спавна
- ✅ Установка конкретной точки спавна
- ✅ Проверка наличия блока над головой (игроки не спавнятся на открытом небе)
- ✅ Настройка максимальной высоты спавна
- ✅ Автоматическое игнорирование игроков с кроватью или якорем возрождения
- ✅ Команда `/dwarfspawn reload` для перезагрузки конфигурации

## Установка

1. Соберите плагин с помощью Maven:

   ```bash
   mvn clean package
   ```

2. Скопируйте файл `DwarfSpawn-1.0.0.jar` из папки `target/` в папку `plugins/` вашего сервера

3. Перезапустите сервер или используйте `/reload`

## Конфигурация

Файл конфигурации находится в `plugins/DwarfSpawn/config.yml`:

```yaml
# Включить/выключить радиус спавна
radius-enabled: true

# Радиус спавна (в блоках)
spawn-radius: 50

# Конкретная точка спавна (если radius-enabled: false)
spawn-location:
  x: 0
  y: 50
  z: 0
  world: world

# Минимальная высота для спавна
min-spawn-height: 20

# Максимальная высота для спавна
max-spawn-height: 75

# Проверять наличие блока над головой
check-block-above: true
```

### Параметры конфигурации

- **radius-enabled**: `true` - включить случайный спавн в радиусе, `false` - использовать конкретную точку
- **spawn-radius**: Радиус в блоках для случайного спавна (работает только если `radius-enabled: true`)
- **spawn-location**: Конкретные координаты спавна (x, y, z) и название мира
- **min-spawn-height**: Минимальная высота, ниже которой игроки не будут спавниться (защита от спавна в глубоких пещерах под водой)
- **max-spawn-height**: Максимальная высота, выше которой игроки не будут спавниться
- **check-block-above**: `true` - игроки будут спавниться только там, где над ними есть блок (не на открытом небе)

## Команды

- `/dwarfspawn reload` или `/ds reload` - перезагрузить конфигурацию плагина
- Требует права: `dwarfspawn.reload` (по умолчанию только для операторов)

## Как это работает

1. При смерти игрока плагин проверяет, есть ли у него своя точка спавна (кровать или якорь возрождения)
2. Если у игрока нет своей точки спавна, плагин применяет настройки из конфигурации
3. Если включен радиус спавна, игрок спавнится в случайной точке в пределах указанного радиуса
4. Плагин автоматически ищет безопасное место для спавна:
   - Под ногами должен быть твердый блок
   - Место для спавна должно быть свободным (воздух)
   - Игроки не будут спавниться под водой или лавой
   - Игроки не будут спавниться ниже минимальной высоты (защита от глубоких пещер)
   - Игроки не будут спавниться выше максимальной высоты
   - Если включена проверка блока над головой, над игроком должен быть блок

## Сборка

Для сборки плагина используйте Maven:

```bash
mvn clean package
```

Собранный JAR файл будет находиться в `target/DwarfSpawn-1.0.0.jar`

## Требования

- Minecraft сервер 1.21.10 (Spigot или Paper)
- Java 21 или выше

## Лицензия

Этот плагин создан для личного использования.
